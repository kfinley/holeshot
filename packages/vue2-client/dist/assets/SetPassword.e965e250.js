import{P as m,S as c,C as v,e as w,f,V as _,u as l,A as h,m as g,i as u,n as P}from"./index.302d4452.js";import{C as b}from"./card.2ac713df.js";var y=Object.defineProperty,C=Object.getOwnPropertyDescriptor,n=(s,t,e,a)=>{for(var r=a>1?void 0:a?C(t,e):t,o=s.length-1,d;o>=0;o--)(d=s[o])&&(r=(a?d(t,e,r):d(r))||r);return a&&r&&y(t,e,r),r};let i=class extends _{constructor(){super(...arguments),this.password1="",this.password2=""}mounted(){var e;(e=this.password1Element)==null||e.focus();const[s,t]=this.regCode.split("|");this.username=s,this.previousPassword=t,console.log(`${s} : ${t}`),l.login({email:this.username,password:this.previousPassword})}async onSubmit(){await this.formObserver.validate()&&(console.log("state",this.state),l.changePassword({username:this.username,previousPassword:this.previousPassword,proposedPassword:this.password1}))}get processing(){return this.state.authStatus===h.SettingPassword}get messages(){return g}};n([u()],i.prototype,"formObserver",2);n([u()],i.prototype,"password1Element",2);n([m()],i.prototype,"regCode",2);n([c("User")],i.prototype,"state",2);i=n([v({components:{ValidationProvider:w,ValidationObserver:f,Card:b}})],i);var S=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("card",{staticStyle:{height:"90vh"},attrs:{"header-text":"Set Password","show-close":!1,"max-width":"600px",padding:"2"}},[e("ValidationObserver",{ref:"formObserver"},[e("form",{attrs:{autocomplete:"off",role:"form text-left"},on:{submit:function(a){return a.preventDefault(),s.onSubmit.apply(null,arguments)}}},[e("div",{staticClass:"mb-3"},[e("ValidationProvider",{attrs:{name:"password1",rules:"required",mode:"passive"},scopedSlots:s._u([{key:"default",fn:function(a){var r=a.errors;return[e("input",{directives:[{name:"model",rawName:"v-model",value:s.password1,expression:"password1"}],ref:"password1Element",class:["form-control",{"is-invalid":r[0]}],attrs:{type:"password",placeholder:"Password","aria-label":"Password",disabled:s.processing},domProps:{value:s.password1},on:{input:function(o){o.target.composing||(s.password1=o.target.value)}}}),e("div",{directives:[{name:"show",rawName:"v-show",value:r[0],expression:"errors[0]"}],staticClass:"invalid-feedback"},[s._v(" "+s._s(r[0])+" ")])]}}])})],1),e("div",{staticClass:"mb-3"},[e("ValidationProvider",{attrs:{name:"password2",rules:"required",mode:"passive"},scopedSlots:s._u([{key:"default",fn:function(a){var r=a.errors;return[e("input",{directives:[{name:"model",rawName:"v-model",value:s.password2,expression:"password2"}],class:["form-control",{"is-invalid":r[0]}],attrs:{type:"password",placeholder:"Confirm Password","aria-label":"Confirm Password",disabled:s.processing},domProps:{value:s.password2},on:{input:function(o){o.target.composing||(s.password2=o.target.value)}}}),e("div",{directives:[{name:"show",rawName:"v-show",value:r[0],expression:"errors[0]"}],staticClass:"invalid-feedback"},[s._v(" "+s._s(r[0])+" ")])]}}])})],1),e("div",{staticClass:"text-center"},[e("button",{staticClass:"btn primary-gradient w-100 my-4 mb-2",attrs:{type:"submit",disabled:s.processing}},[s.processing?e("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}):s._e(),s._v(" Set Password ")])])])])],1)},x=[];const p={};var O=P(i,S,x,!1,V,null,null,null);function V(s){for(let t in p)this[t]=p[t]}var j=function(){return O.exports}();export{j as default};
